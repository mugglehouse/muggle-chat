# 聊天应用侧边栏组件 (Sider)

## 功能概述

侧边栏组件是聊天应用的重要组成部分，负责管理和展示会话列表，提供以下核心功能：

- 新建会话
- 会话列表展示（按最新更新时间排序）
- 会话搜索（支持实时过滤）
- 会话切换
- 会话标题编辑
- 会话删除
- 侧边栏展开/收起

## 组件 API

### Props

| 名称 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| v-model:collapsed | boolean | false | 控制侧边栏的展开/收起状态 |

### 状态变量

| 名称 | 类型 | 说明 |
|------|------|------|
| searchKeyword | string | 搜索关键词 |
| isSearching | boolean | 是否处于搜索状态 |
| filteredSessionList | Session[] | 过滤后的会话列表 |

### 事件

组件内部事件都通过 store 进行状态管理，不直接对外暴露事件。

### 插槽

无自定义插槽。

## 功能说明

### 1. 新建会话

点击顶部的"新建对话"按钮，会：
- 创建一个新的会话（默认标题为"新对话"）
- 自动切换到新创建的会话
- 新会话会显示在列表顶部

### 2. 会话搜索

- 点击搜索按钮进入搜索模式
- 输入框自动获取焦点
- 支持实时搜索过滤（不区分大小写）
- 支持一键清空搜索内容
- 失去焦点或按 ESC 键退出搜索
- 搜索时会话列表实时更新显示匹配结果

### 3. 会话列表

- 按最新更新时间倒序排序显示
- 支持通过搜索关键词过滤
- 当前选中的会话会高亮显示
- 鼠标悬停时显示编辑和删除按钮
- 支持会话标题溢出时自动截断

### 4. 会话管理

#### 切换会话
- 点击会话项即可切换到对应会话
- 切换后会更新 store 中的当前会话 ID

#### 编辑会话标题
- 鼠标悬停时显示编辑按钮
- 点击编辑按钮进入编辑模式
- 支持通过回车键或失去焦点完成编辑
- 编辑完成后自动保存并更新显示

#### 删除会话
- 鼠标悬停时显示删除按钮
- 点击删除按钮会显示确认对话框
- 确认后删除会话，并自动切换到其他会话（如果有）

### 5. 响应式设计

- 支持侧边栏展开/收起
- 收起状态下仍然可以通过固定按钮展开
- 搜索功能在侧边栏收起时自动隐藏
- 适配不同屏幕尺寸

## 使用示例

```vue
<script setup lang="ts">
import { ref } from 'vue'
import Sider from './Sider.vue'

const siderCollapsed = ref(false)
</script>

<template>
  <Sider v-model:collapsed="siderCollapsed" />
</template>
```

## 依赖说明

- 状态管理：使用 Pinia store（useChatStore）
- UI 组件：基于 Ant Design Vue
- 图标：使用 @ant-design/icons-vue

## 注意事项

1. 会话数据会自动保存到本地存储
2. 编辑和删除操作都有防止事件冒泡的处理
3. 会话标题编辑有重复提交的防护
4. 删除操作有确认提示，防止误操作
5. 搜索功能支持实时过滤，无需手动触发
6. 搜索状态会在失去焦点或按 ESC 键时自动清除 