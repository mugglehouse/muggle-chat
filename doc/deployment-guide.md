# Muggle Chat 图片功能部署指南

## 一、环境要求

### 1.1 基础环境
- Node.js >= 18.x
- npm >= 8.x
- 现代浏览器（Chrome、Firefox、Safari、Edge 最新版本）

### 1.2 API 配置
```bash
# .env 配置示例
VITE_OPENAI_API_URL=https://api.openai.com/v1
VITE_OPENAI_API_MODEL=gpt-4-vision-preview
VITE_OPENAI_API_KEY=your_api_key
VITE_OPENAI_API_TEMPERATURE=0.7
```

## 二、部署步骤

### 2.1 安装依赖
```bash
# 在项目根目录下执行
npm install

# 或者使用 pnpm
pnpm install
```

### 2.2 环境配置
1. 复制环境变量模板
```bash
cp .env.example .env
```

2. 配置 OpenAI API
- 设置 API Key
- 配置 API URL（如果使用代理）
- 设置模型参数

### 2.3 构建部署
```bash
# 构建项目
npm run build

# 预览构建结果
npm run preview
```

## 三、功能验证

### 3.1 基础功能验证
1. **图片生成**
   - 测试提示词输入
   - 验证图片生成
   - 检查图片预览

2. **消息系统**
   - 确认消息正常发送
   - 验证图片消息显示
   - 测试会话管理

### 3.2 性能检查
1. **响应时间**
   - 图片生成响应时间 < 10s
   - 图片加载时间 < 3s
   - 界面交互响应 < 100ms

2. **资源占用**
   - 内存使用正常
   - CPU 使用率正常
   - 网络带宽合理

## 四、使用说明

### 4.1 图片生成
1. 在聊天界面点击图片生成按钮
2. 输入图片描述（提示词）
3. 选择图片尺寸和数量
4. 点击生成按钮
5. 等待图片生成完成

### 4.2 图片管理
1. 查看生成的图片
2. 点击图片可放大预览
3. 使用右键菜单或工具栏进行操作
4. 在会话列表中管理图片消息

### 4.3 注意事项
1. API 限制
   - 图片生成数量限制：每次最多 10 张
   - 提示词长度限制：4000 字符
   - 图片尺寸选项：256x256、512x512、1024x1024

2. 性能建议
   - 避免同时生成过多图片
   - 建议使用合适的图片尺寸
   - 定期清理缓存

## 五、故障排除

### 5.1 常见问题
1. **图片生成失败**
   - 检查 API Key 是否正确
   - 确认网络连接正常
   - 验证配额是否充足

2. **图片加载慢**
   - 检查网络连接
   - 确认图片大小合适
   - 考虑使用 CDN

3. **界面异常**
   - 清除浏览器缓存
   - 刷新页面
   - 检查控制台错误

### 5.2 联系支持
- 技术支持邮箱：support@example.com
- 问题反馈地址：https://github.com/your-repo/issues
- 文档地址：https://your-docs-site.com

## 六、更新维护

### 6.1 版本更新
1. 拉取最新代码
```bash
git pull origin main
```

2. 更新依赖
```bash
npm install
```

3. 重新构建
```bash
npm run build
```

### 6.2 日常维护
1. 定期检查
   - 系统日志
   - API 使用情况
   - 性能监控

2. 数据备份
   - 定期备份配置
   - 备份重要数据
   - 记录系统状态

## 七、安全建议

### 7.1 API 安全
- 妥善保管 API Key
- 设置请求限制
- 监控异常请求

### 7.2 数据安全
- 加密敏感信息
- 定期更新密钥
- 控制访问权限

### 7.3 运行安全
- 及时更新依赖
- 定期安全审计
- 监控系统状态 